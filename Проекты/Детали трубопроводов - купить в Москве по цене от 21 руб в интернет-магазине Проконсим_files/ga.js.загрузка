!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateUuid=t.getUrlQueryParam=t.discoverDomain=t.setCookie=t.getCookie=void 0;var n=r(1);function o(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2]}t.getCookie=o,t.setCookie=function(e,t,r){void 0===r&&(r="");var n=new Date;n.setTime(n.getTime()+31536e6),document.cookie="".concat(e,"=").concat(t,"; expires=").concat(n.toUTCString(),"; path=/; ").concat(r?"domain=".concat(r):"")},t.discoverDomain=function(){var e=new Date,t=location.hostname.split(".").reverse(),r=[],i=(0,n.nanoid)(6),a=(0,n.nanoid)(6),s="";for(e.setTime(e.getTime()+6e4),r.push(t.shift());t.length>0;){if(s=r.reverse().join("."),document.cookie=i+"="+a+"; expires="+e.toUTCString()+"; domain=."+s+"; path=/",o(i)===a)return s;r.push(t.shift())}return location.hostname},t.getUrlQueryParam=function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return t?decodeURI(t[1]):null},t.generateUuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}},function(e,t,r){"use strict";r.r(t),r.d(t,"nanoid",(function(){return s})),r.d(t,"customAlphabet",(function(){return a})),r.d(t,"customRandom",(function(){return i})),r.d(t,"urlAlphabet",(function(){return n})),r.d(t,"random",(function(){return o}));let n="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW";let o=e=>crypto.getRandomValues(new Uint8Array(e)),i=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*n*t/e.length);return()=>{let i="";for(;;){let a=r(o),s=o;for(;s--;)if(i+=e[a[s]&n]||"",i.length===+t)return i}}},a=(e,t)=>i(e,t,o),s=(e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let n=63&r[e];t+=n<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n<63?"_":"-"}return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SESSION_STORAGE_UUID_HAS_BEEN_SET=void 0,t.SESSION_STORAGE_UUID_HAS_BEEN_SET="grUuidHasBeenSet"},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterForeignServiceWorkers=t.fetchSiteConfig=t.isMobileDevice=void 0;var i=r(4);t.isMobileDevice=function(){return/iPhone|iPad|iPod|Android|webOS|BlackBerry|Windows Phone/i.test(navigator.userAgent)||screen.availWidth<i.MOBILE_VIEW_BREAKPOINT},t.fetchSiteConfig=function(e){return new Promise((function(t,r){var n=document.createElement("script");n.type="application/javascript",n.src=e,document.body.appendChild(n),n.onload=function(){t()},n.onerror=r}))},t.unregisterForeignServiceWorkers=function(){return n(this,void 0,void 0,(function(){var e,t,r,n,i;return o(this,(function(o){switch(o.label){case 0:return"serviceWorker"in navigator?[4,navigator.serviceWorker.getRegistrations()]:[3,2];case 1:for(e=o.sent(),t=[],r=0,n=e;r<n.length;r++)(i=n[r]).active.scriptURL.endsWith("gr_sw_main.js")||t.push(i.unregister());return[2,Promise.all(t)];case 2:return[2]}}))}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MOBILE_VIEW_BREAKPOINT=t.DB_USER_DATA_ID=t.DB_OBJECT_STORE=t.GR_DATABASE_NAME=void 0,t.GR_DATABASE_NAME="gr_webpush_database",t.DB_OBJECT_STORE="gr_visitor_data",t.DB_USER_DATA_ID="sub_data",t.MOBILE_VIEW_BREAKPOINT=480},,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});new(r(8).GetResponsePushNotificationsObject)("IDpsOOh0UFwYqdHpwAw","https://proconsim.getresponse360.pl/")},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.GetResponsePushNotificationsObject=void 0;var i=r(9),a=r(0),s=r(10),c=r(11),u=r(3),l=r(12),d=r(2),p=function(){function e(e,t){var r=this;this.wpid=e,this.domain=t,this.promptEndpoint=globalThis.grpr,this.onNotificationConfirm=function(){r.sendStatsData("acc"),r.registerUserForNotifications(),r.closeNotificationPrompt(void 0,!0)},this.onImageError=function(e){var t=e.target;t.parentNode.removeChild(t)},this.closeNotificationPrompt=function(e,t){var n=document.documentElement.querySelector('[data-gr-prompt="content"]'),o=(0,s.querySelectorWithOptionalShadowRoot)(n,'[data-gr-prompt-button="allow"]'),i=(0,s.querySelectorWithOptionalShadowRoot)(n,'[data-gr-prompt-button="cancel"]'),c=(0,s.querySelectorWithOptionalShadowRoot)(n,"img");null==c||c.removeEventListener("error",r.onImageError),o.removeEventListener("click",r.onNotificationConfirm),i.removeEventListener("click",r.closeNotificationPrompt),t||((0,a.setCookie)("gaNotificationConsent","rejected"),r.sendStatsData("dec")),document.body.removeChild(n)},this.initialize()}return e.prototype.initialize=function(){return n(this,void 0,void 0,(function(){var e,t,r,n,i,l,d,p,f,h=this;return o(this,(function(o){switch(o.label){case 0:this.assureUuidIsSet(),e="default"===Notification.permission,t="granted"===Notification.permission,r="serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window,n="rejected"===(0,a.getCookie)("gaNotificationConsent"),o.label=1;case 1:return o.trys.push([1,8,,9]),[4,(0,u.fetchSiteConfig)(this.promptEndpoint)];case 2:return o.sent(),i=globalThis._grpr.pc,this.promptId=globalThis._grpr.pid,this.dataVer=globalThis._grpr._v,this.statisticEndpoint=this.domain+globalThis._grpr.pst,t?[4,(0,u.unregisterForeignServiceWorkers)()]:[3,5];case 3:return o.sent(),[4,this.registerServiceWorker()];case 4:return o.sent(),this.assignUuidToPushSubscription(),[3,7];case 5:return r&&!n&&e&&this.promptEndpoint?[4,(0,u.unregisterForeignServiceWorkers)()]:[3,7];case 6:o.sent(),globalThis._grpr&&(i&&(i.mobile||i.desktop)?(l=(0,c.createVisualPrompt)(i.desktop,i.mobile),d=(0,s.querySelectorWithOptionalShadowRoot)(l,'[data-gr-prompt-button="allow"]'),p=(0,s.querySelectorWithOptionalShadowRoot)(l,'[data-gr-prompt-button="cancel"]'),(0,s.querySelectorWithOptionalShadowRoot)(l,"img").addEventListener("error",this.onImageError),d.addEventListener("click",this.onNotificationConfirm),p.addEventListener("click",this.closeNotificationPrompt),d.style.cursor="pointer",p.style.cursor="pointer",(0,s.watchForNodeAppearance)(l,(function(){h.sendStatsData("dic")})),document.body.appendChild(l)):this.registerUserForNotifications()),o.label=7;case 7:return[3,9];case 8:return f=o.sent(),console.error(f),[3,9];case 9:return[2]}}))}))},e.prototype.registerServiceWorker=function(){return n(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,navigator.serviceWorker.register("./gr_sw_main.js")];case 1:return[2,e.sent()];case 2:return e.sent(),[2,navigator.serviceWorker.register("/gr_sw_main.js")];case 3:return[2]}}))}))},e.prototype.assureUuidIsSet=function(){(0,a.getCookie)("gaVisitorUuid")||(window.sessionStorage.setItem(d.SESSION_STORAGE_UUID_HAS_BEEN_SET,"true"),(0,a.setCookie)("gaVisitorUuid",(0,a.generateUuid)()))},e.prototype.sendStatsData=function(e){return fetch("".concat(this.statisticEndpoint).concat(e),{mode:"cors"})},e.prototype.getAuthToken=function(){return n(this,void 0,void 0,(function(){var e,t,r;return o(this,(function(n){switch(n.label){case 0:if(!(e=this.wpid))return[3,5];n.label=1;case 1:return n.trys.push([1,4,,5]),this.authToken?[2,this.authToken]:[4,fetch("".concat(this.domain,"webpush/auth"),{method:"POST",mode:"cors",headers:{"X-WpId":e,"Content-Type":"application/json"},body:JSON.stringify({url:window.location.origin,gau:(0,a.getCookie)("gaVisitorUuid")})})];case 2:return[4,n.sent().text()];case 3:return t=n.sent(),this.authToken=t,[2,t];case 4:return r=n.sent(),console.error(r),[3,5];case 5:return[2]}}))}))},e.prototype.registerUserForNotifications=function(){return n(this,void 0,void 0,(function(){var e,t,r,n,s,c,u,d,p;return o(this,(function(o){switch(o.label){case 0:return e=this.dataVer,t=(0,a.getCookie)("gaVisitorUuid"),[4,this.registerServiceWorker()];case 1:return[4,(r=o.sent()).pushManager.getSubscription()];case 2:if(n=o.sent(),null!==n)return[3,7];o.label=3;case 3:return o.trys.push([3,6,,7]),[4,this.getAuthToken()];case 4:return s=o.sent(),c=(0,i.default)(s),u=c.subEndp,this.sendStatsData("din"),[4,r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:c.vpk})];case 5:return d=o.sent(),(0,l.storeUserPushDataInDatabase)(t,d),this.sendStatsData("acn"),fetch(u,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","X-WpId":this.wpid,Authorization:"Bearer ".concat(s)},body:JSON.stringify({sub:d,prv:e})}),[3,7];case 6:throw 0===(p=o.sent()).code&&this.sendStatsData("den"),p;case 7:return[2]}}))}))},e.prototype.assignUuidToPushSubscription=function(){return n(this,void 0,void 0,(function(){var e,t,r,n,i,a,s,c,u;return o(this,(function(o){switch(o.label){case 0:return e=window.sessionStorage.getItem(d.SESSION_STORAGE_UUID_HAS_BEEN_SET),t="".concat(this.domain,"webpush/assign-uuid"),[4,this.getAuthToken()];case 1:return r=o.sent(),e?[4,navigator.serviceWorker.ready]:[3,7];case 2:return n=o.sent(),[4,Promise.all([n.pushManager.getSubscription(),(0,l.getUserDataFromDatabase)()])];case 3:if(i=o.sent(),a=i[0],s=i[1],!(c=a||(null==s?void 0:s.pushSubscription)))return[3,7];o.label=4;case 4:return o.trys.push([4,6,,7]),[4,fetch(t,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","X-WpId":this.wpid,Authorization:"Bearer ".concat(r)},body:JSON.stringify({sub:c,prv:this.dataVer})})];case 5:return o.sent(),window.sessionStorage.removeItem(d.SESSION_STORAGE_UUID_HAS_BEEN_SET),[3,7];case 6:return u=o.sent(),console.error(u),[3,7];case 7:return[2]}}))}))},e}();t.GetResponsePushNotificationsObject=p},function(e,t,r){"use strict";function n(e){this.message=e}r.r(t),r.d(t,"InvalidTokenError",(function(){return a})),n.prototype=new Error,n.prototype.name="InvalidCharacterError";var o="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,i=0,a=0,s="";o=t.charAt(a++);~o&&(r=i%4?64*r+o:o,i++%4)?s+=String.fromCharCode(255&r>>(-2*i&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return s};function i(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(o(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return o(t)}}function a(e){this.message=e}a.prototype=new Error,a.prototype.name="InvalidTokenError",t.default=function(e,t){if("string"!=typeof e)throw new a("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(i(e.split(".")[r]))}catch(e){throw new a("Invalid token specified: "+e.message)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.querySelectorWithOptionalShadowRoot=t.watchForNodeAppearance=void 0,t.watchForNodeAppearance=function(e,t){new MutationObserver((function(r,n){r.forEach((function(r){Array.from(r.addedNodes).includes(e)&&(t(),n.disconnect())}))})).observe(document.body,{childList:!0})},t.querySelectorWithOptionalShadowRoot=function(e,t){return(e.shadowRoot||e).querySelector(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createVisualPrompt=void 0;var n=r(3),o={".gr-visual-prompt":{all:"initial !important",position:"fixed !important",left:"50% !important",top:"0 !important","z-index":"999999999 !important",transform:"translateX(-50%) !important"}},i={".gr-visual-prompt":{all:"initial !important",position:"fixed !important",left:"50% !important",bottom:"0 !important","z-index":"999999999 !important",transform:"translateX(-50%) !important"}};t.createVisualPrompt=function(e,t){var r,a,s,c,u,l,d=document.createElement("div"),p=(0,n.isMobileDevice)();return d.attachShadow&&(r=d.attachShadow({mode:"open"})),d.dataset.grPrompt="content",d.classList.add("gr-visual-prompt"),r?r.innerHTML=p?t:e:d.innerHTML=p?t:e,a=p?"mobile":"desktop",c=document.createElement("style"),l="mobile"===a?i:o,u=Object.keys(l).reduce((function(e,t){var r=l[t];if("object"==typeof r){var n=Object.keys(r).reduce((function(e,t){return e+="".concat(t,": ").concat(r[t],";")}),"");e.push("".concat(t," {").concat(n,"}"))}return e}),[]),document.head.appendChild(c),s=c.sheet,u.forEach((function(e){s.insertRule(e,s.rules.length)})),d}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserDataFromDatabase=t.storeUserPushDataInDatabase=void 0;var n=r(4);function o(){return window.indexedDB.open(n.GR_DATABASE_NAME,1)}t.storeUserPushDataInDatabase=function(e,t){window.indexedDB.deleteDatabase(n.GR_DATABASE_NAME),o().onupgradeneeded=function(r){r.target.result.createObjectStore(n.DB_OBJECT_STORE,{keyPath:"id"}).add({id:n.DB_USER_DATA_ID,uuid:e,pushSubscription:t.toJSON()})}},t.getUserDataFromDatabase=function(){return new Promise((function(e){o().onsuccess=function(t){try{var r=t.target.result.transaction(n.DB_OBJECT_STORE,"readonly").objectStore(n.DB_OBJECT_STORE).get(n.DB_USER_DATA_ID);r.onsuccess=function(){e(r.result)}}catch(t){e(null)}}}))}}]);